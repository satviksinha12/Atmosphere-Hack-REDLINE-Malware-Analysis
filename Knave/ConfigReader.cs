using System;
using System.Collections.Generic;
using System.IO;

// Token: 0x02000011 RID: 17
public static class ConfigReader
{
	// Token: 0x06000087 RID: 135 RVA: 0x00006150 File Offset: 0x00004550
	public static List<Entity5> Read(IEnumerable<Entity17> configs)
	{
		List<Entity5> list = new List<Entity5>();
		try
		{
			foreach (Entity17 entity in configs)
			{
				foreach (Entity16 entity2 in entity.Id3)
				{
					try
					{
						FileInfo[] files = new DirectoryInfo(Environment.ExpandEnvironmentVariables(entity.Id2 + "\\" + entity2.Id1)).GetFiles(entity2.Id2, entity2.Id3 ? SearchOption.AllDirectories : SearchOption.TopDirectoryOnly);
						foreach (FileInfo fileInfo in files)
						{
							try
							{
								Entity5 entity3 = new Entity5(fileInfo.FullName)
								{
									Id4 = fileInfo.Directory.FullName.Replace(Environment.ExpandEnvironmentVariables(entity.Id2) + "\\", string.Empty),
									Id5 = entity.Id1
								};
								bool flag = entity3.Id3 != null;
								if (flag)
								{
									bool flag2 = entity3.Id3.Length != 0;
									if (flag2)
									{
										list.Add(entity3);
									}
								}
							}
							catch (Exception ex)
							{
							}
						}
					}
					catch
					{
					}
				}
			}
		}
		catch
		{
		}
		return list;
	}
}
